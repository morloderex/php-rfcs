====== PHP RFC: Remove deprecated functionality in PHP 7 ======
  * Date: 2014-09-11
  * Author: Nikita Popov <nikic@php.net>
  * Status: Under Discussion
  * Targeting: PHP 7

===== Introduction =====

This RFC proposes to remove functionality which has been deprecated during the 5.x cycle.

The following extensions are deprecated:

  * ext/ereg (since PHP 5.3; use ext/pcre instead)
  * ext/mysql (since PHP 5.5; use ext/mysqli or ext/pdo_mysql instead) [TODO]

The following language features are deprecated:

  * Assignment of ''new'' by reference (since PHP 5.3; use normal assignment instead)
  * Scoped calls of non-static methods from incompatible ''$this'' context (since PHP 5.6)

The following functions are deprecated:

  * ''dl'' on fpm-fcgi (since PHP 5.3)
  * ''set_magic_quotes_runtime'' and ''magic_quotes_runtime'' (since PHP 5.4)
  * ''set_socket_blocking'' (since PHP 5.4; use ''stream_set_blocking'' instead)
  * ''mcrypt_generic_end'' (since PHP 5.4; use ''mcrypt_generic_deinit'' instead)
  * ''mcrypt_ecb'', ''mcrypt_cbc'', ''mcrypt_cfb'' and ''mcrypt_ofb'' (since PHP 5.5, but documented as deprecated earlier; use ''mcrypt_encrypt'' and ''mcrypt_decrypt'' instead)
  * ''datefmt_set_timezone_id'' and ''IntlDateFormatter::setTimeZoneID'' (since PHP 5.5; use ''datefmt_set_timezone'' or ''IntlDateFormatter::setTimeZone'' instead) [TODO]

The following ini options are deprecated:

  * ''xsl.security_prefs'' (since PHP 5.4; use ''XsltProcessor::setSecurityPrefs'' instead)
  * ''iconv.input_encoding'', ''iconv.output_encoding'', ''iconv.internal_encoding'', ''mbstring.http_input'', ''mbstring.http_output'' and ''mbstring.internal_encoding'' (since PHP 5.6; use ''php.input_encoding'', ''php.internal_encoding'' and ''php.output_encoding'' instead) [TODO]

The following miscellaneous functionality is deprecated:

  * ''#'' style comments in ini files (since PHP 5.3; use '';'' style comments instead)
  * String category names in ''setlocale()'' (since PHP 5.3; use ''LC_*'' constants instead)
  * The ''$is_dst'' parameter of the ''mktime()'' and ''gmmktime()'' functions (since PHP 5.3)
  * Unsafe curl file uploads (since PHP 5.5; use ''CurlFile'' instead)
  * ''preg_replace()'' eval modifier (since PHP 5.5; use ''preg_replace_callback'' instead)
  * ''PDO::PGSQL_ATTR_DISABLE_NATIVE_PREPARED_STATEMENT'' driver option (since PHP 5.6; use ''PDO::ATTR_EMULATE_PREPARES'' instead) [TODO]
  * ''CN_match'' and ''SNI_server_name'' stream context option (since PHP 5.6; use ''peer_name'' instead) [TODO]

===== Patches and Tests =====

  * Removal of ext/ereg: https://github.com/php/php-src/pull/816
  * Removal of everything else not marked with ''[TODO]'': https://github.com/php/php-src/pull/815

===== Vote =====

Three votes are suggested:

  * Removal of ext/ereg, requiring simple majority.
  * Removal of ext/mysql, requiring simple majority.
  * Removal of everything else, requiring 2/3 majority, as it includes language features.

The last vote may be split further in case some points are heavily contested.