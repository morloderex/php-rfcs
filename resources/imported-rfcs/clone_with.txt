====== PHP RFC: Clone with ======
  * Date: 2022-10-24
  * Author: Máté Kocsis <kocsismate@php.net>
  * Status: Draft
  * Target Version: PHP 8.3
  * Implementation: https://github.com/php/php-src/pull/9497

===== Introduction =====

With the advent of standards using quasi-immutable objects, like [[https://www.php-fig.org/psr/psr-7/|PSR-7]], cloning became increasingly widely used. Even though [[rfc:readonly_properties_v2|PHP RFC: Readonly properties 2.0]] provided a foundational building block for quasi-immutable objects, it didn't provide any easy way to clone readonly properties. Until now, this problem made it very cumbersome to use readonly properties for any non-basic use-cases.

===== Proposal =====

The current proposal aims to add support for a new language construct called "clone with" by extending the ''clone'' operator, that would make it possible to write "wither" methods with less code, no matter if the properties in question are readonly or non-readonly.

===== Reflection =====

The proposal doesn't have impact for reflection.

===== Backward Incompatible Changes =====

If the proposal gets accepted, ''with'' becomes a reserved keyword.

===== Vote =====

The vote requires 2/3 majority.
