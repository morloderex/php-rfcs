====== PHP RFC: Deprecations for PHP 7.4 ======
  * Date: 26th June, 2018
  * Author: Kalle Sommer Nielsen <kalle@php.net>, Nikita Popov <nikic@php.net>
  * Status: In Draft

===== Introduction =====

This is a draft RFC for multiple deprecations targeting PHP 7.4. The RFC proposes to deprecate the listed functionality in PHP 7.4 and remove it in PHP 8.

The following list provides a short overview of the functionality targeted for deprecation, while more detailed explanation is provided in the Proposal section:

  * ''enable_dl'' php.ini directive
  * The 'real' type
  * The ''hebrev()'' & ''hebrevc()'' functions

The following are still Work-In-Progress and ideas:

  * Second parameter of spl_autoload() and its associated function spl_autoload_extensions()
  * convert_cyr_string()
  * Remove get_magic_quotes_gpc()
  * allow_url_include ini directive
  * The alternative string interpolation syntaxes (${varName}, ${varName['offset']}, ${expr}) and make them more consistent ({$varName}, {$varName['offset']}, {${expr}})
  * Unify parameter order for implode() to match explode()
  * Function variants that already exists as constants (e.g. php_sapi_name(), phpversion(), pi())

===== Proposal =====

Each feature proposed for deprecation is voted separately. Each vote requires a 2/3 majority, independently of whether it is a language or standard library change. All votes refer to deprecation in PHP 7.4 and removal in the next major version (presumably PHP 8.0).

==== enable_dl php.ini directive ====

The ''enable_dl'' php.ini directive controls whether or not the ''dl()'' function is available. However as of PHP 5.3, the ''dl()'' function was limited to the CLI and Embed SAPIs and between PHP 5.3.9 and 7.0.0, it was also available in the FPM SAPI.

This means that the ''enable_dl'' effectively has no greater meaning as it will never be available in a shared environment anyway, as any CLI user could easily bypass it anyway.

Proposal: Add a deprecation warning if ''enable_dl'' is non zero at start-up and when using CLI or Embed.

==== The 'real' type ====

Currently PHP has a float data type, with 2 additional aliases: double & real. The latter is very very rarely used and should be deprecated. This includes both the (real) type-cast and the is_real() function. Currently the settype() function does not support the 'real' string, so it is not affected.

Upgrading is relatively easy and can be done by replacing all (real) type-casts with (float) and all is_real() calls with is_float().

Proposal: Add a deprecation warning for each time the (real) type-cast is used and each time the is_real() function is called.

==== The hebrev() and hebrevc() functions ====

The ''hebrev()'' and ''hebrevc()'' functions are functions that helped make websites hebrew before browsers properly supported RTL, by simply converting the nature of RTL to LTR writing for easier display on websites. All modern browsers nowadays properly support unicode and RTL text direction and therefore it seems reasonable to deprecate these functions.

The ''hebrevc()'' function is essentially the same as calling ''nl2br()'' on the result of a ''hebrev()'' call.

Proposal: Add a deprecation warning if either ''hebrev()'' or ''hebrevc()'' is called.


===== Backward Incompatible Changes =====

For PHP 7.4 additional deprecation notices will appear. For PHP 8.0 the previously deprecated functionality will no longer be available.

===== Vote =====

Each of the bullet points above will get a separate vote. All votes will require a 2/3 supermajority, independently of whether they are language changes or not.