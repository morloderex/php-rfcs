====== PHP RFC: Add WHATWG compliant URL parsing API ======
  * Version: 1.0
  * Date: 2024-06-11
  * Author: Máté Kocsis, kocsismate@php.net
  * Status: Draft
  * First Published at: https://wiki.php.net/rfc/url_parsing_api
  * Implementation: https://github.com/php/php-src/pull/14461

===== Introduction =====

URLs are one of the most fundamental concepts of the web because they make it possible to reference specific resources on a network. URLs were invented by Tim Berners-Lee himself in 1994 when RFC 1738 was accepted. Since then WHATWG maintains a living specification which is basically implemented by most browsers.

Despite the ubiquitous nature of URLs, them are not so unequivocal as people may think, because different clients treat and parse them differently. This is a serious issue, as it hinders interoperability of different tools and the stability of the URL system.

Unfortunately, PHP just further complicates the picture: it offers the ''parse_url()'' function for parsing URLs. However, it doesn't follow any standards. Even the PHP manual contains the following warning:

<blockquote>This function may not give correct results for relative or invalid URLs, and the results may not even match common behavior of HTTP clients. ...</blockquote>

This is a problem that may cause headaches.

===== Proposal =====

===== Backward Incompatible Changes =====
None.

===== Proposed PHP Version(s) =====

Next minor version (either 8.5 or 9.0).

===== Future Scope =====
Support for other parser backends may be added so that other libraries (like [[https://www.ada-url.com/|Ada URL]]) could be used instead of Lexbor.

===== References =====
Discussion thread: 

===== Vote =====

The vote requires 2/3 majority in order to be accepted.

<doodle title="Add the WHATWG compliant URL API described above?" auth="kocsismate" voteType="single" closed="yes" closeon="2024-05-30T10:00:00Z">
   * yes
   * no
</doodle>
