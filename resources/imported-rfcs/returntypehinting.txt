
====== PHP RFC: Return Type-Hinting ======
  * Version: 0.1
  * Date: 2014-03-20 
  * Author: Levi Morrison <levim@php.net>
  * Status: Draft
  * First Published at: http://wiki.php.net/rfc/returntypehinting

===== Introduction =====

Many developers would like to be able to use type-hint hinting in return values.

===== Proposal =====

This proposal adds an optional return type-hint to function declarations. If the type-hint for the return type is provided then the engine will ensure that the return value matches the type-hint; if no type-hint is provided then the engine functions as normal. If the return value does not match the type-hint then a catchable fatal error will be issued (same as type-hints for parameters).

Here is an example of the ''ini_get_all'' signature using the type-hint for a return type:

    function ini_get_all ($extension, $details = true) : array {
        // ...
    }


===== Backward Incompatible Changes =====

None known.

===== Proposed PHP Version(s) =====

As there are no known BC breaks this RFC targets PHP 5.7. If a BC break is discovered it will be proposed for PHP 6.0.

===== SAPIs Impacted =====

There is no impact to the various SAPIs.

===== Impact to Existing Extensions =====

There is no BC-break impact to extensions.

===== Open Issues =====

Consider the following function: 

    function foo() : DateTime { 
        return null; 
    }

It declares that it will return "DateTime" but returns "null". If we use current type-hint semantics this will fail on this value.

We can introduce another syntax to allow null to be passed. One option is to reuse the parameter type-hint syntax:

    function foo() : DateTime = null { 
        return null; 
    }

Another option is to use Hack's syntax:

    function foo() : ?DateTime { 
        return null; 
    }

===== Unaffected PHP Functionality =====

This RFC does not alter the meaning or correctness of any existing code; all function type-hints

===== Proposed Voting Choices =====

This RFC modifies PHP syntax and requires a two-third majority of votes.

===== Patches and Tests =====

There is currently no patch.

===== Implementation =====

There is currently no implementation.

===== References =====

No discussion has taken part yet.

===== Rejected Features =====

No rejected features at this time.