====== PHP RFC: Default expression ======
  * Version: 1.0
  * Date: 2024-08-21
  * Author: Paul Morris <bilge@scriptfusion.com>
  * Status: Draft
  * Target Version: PHP 8.5
  * Implementation: https://github.com/php/php-src/pull/15437
  * First Published at: https://wiki.php.net/rfc/default_expression

===== Introduction =====

The only way to pass the default value to a function or method parameter is to not pass anything. This can be particularly difficult in some circumstances, because the language does not offer a way to pass //nothing//. This RFC proposes to make the existing keyword, <php>default</php>, the canonical way to pass the default value. Moreover, ''default'' becomes a valid expression in the function argument context, meaning it can be creatively combined with any and all existing PHP expression grammars to augment the default value as it is passed, including assigning it to variables (see appendix for a comprehensive list of examples).

[[named_params|Named arguments]] provides one way of implicitly passing //nothing//, by skipping over parameters we don't want to pass. A consequence of named arguments is that parameter names suddenly became part of our APIs, and changing names would suddenly constitute a BC break, whether libraries wanted to adopt this behaviour or not. Although it is neither the principal aim nor benefit of this RFC, it does provide an alternative syntax for passing defaults that does not rely on named arguments, and as such relinquishes the burden on libraries to consider parameter names part of their API. That is, libraries can now elect to declare parameter names not part of their backwards-compatibility promise and offer passing ''default'' as the alternative.

===== Proposal =====

<php>default</php> is now a valid expression, but only in argument-passing contexts. In all other contexts it is invalid, save for those in which it was valid previously, namely ''switch'' statements and ''match'' expressions.

===== Backward Incompatible Changes =====

None known.

===== Future Scope =====

Nothing planned.

===== Proposed Voting Choices =====

As per the [[RFC/voting#required_majority|voting RFC]] a yes/no vote with a 2/3 majority is needed for this proposal to be accepted.

<doodle title="Implement default expressions as described?" auth="bilge" voteType="single" closed="false" closeon="2024-08-09T21:00:00Z">
   * Yes
   * No
</doodle>

===== References =====

  * Similar RFCs
    * [[skipparams|Skipping optional parameters for functions]] (Stas Malyshev, January 1, 2015)

===== Special thanks =====

The implementation for this feature was heavily subsidised by invaluable input from Ilija and Bob Weinand. In particular, Ilija assessed the feasibility and guided the implementation path, and Bob submitted the entire Bison grammar patch! Without them, this feature would either have been impossible or highly scuffed. They, along with everyone else whom supported me from R11, have my utmost thanks! ‚ù§