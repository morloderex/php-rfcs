====== Request for Comments: Better benchmarks for PHP ======
  * Version: 1.0
  * Date: 2009-02-01
  * Author: Paul Biggar <paul.biggar@gmail.com>, Nuno Lopes <nlopess@php.net>
  * Status: Working on first draft

Replace PHP's current bench.php with a benchmark suite from which meaningful performance measurements can be taken.

===== Introduction =====

PHP's current bench.php is a micro-benchmark which tests a number of language features. Since it does not behave like a 'real' application, it cannot provide meaningful information about the performance of PHP in general. This RFC will attempt to replace bench.php with a better suite of benchmarks, upon which meaningful performance measurements can be taken.

===== What are we trying to measure =====

=== Performance impact of changes to PHP or its libraries ===

We need to be able to see how changes to the Zend engine affect real programs, not synthetic benchmarks.


=== Realistic profiling ===

We need realistic applications and workloads in order to get useful profiling info. Useful to know which pieces of the VM need optimization.

=== Performance improvement of other PHP implementations relative to PHP ===

There is a need for other PHP implementations to be able to measure their performance against the Zend engine.


===== What do we want in a benchmark =====

Benchmark applications should have few or no external dependencies, as it quickly becomes a major maintenance hell. Programs that use a DB should probably be changed to use a file-based engine like SQLite.
Basically we would like to see real-world apps tweaked so that automated deployment and testing is easy and simple. Each benchmark should also have a set of representative workload inputs (e.g. from real-world log files).


===== What's wrong with bench.php =====

The bench.php script just performs a few standard synthetic tests (e.g. ackermann, fibonacci, etc..). It also performs some tests on the areas that were optimized in Zend Engine 2 (so it's a little biased).


===== What benchmarks currently exist =====

TODO

===== Benchmarks we'd like to see =====
